{
  "name": "Broken Link with Alternative Navigation",
  "description": "Demonstrates handling broken or unavailable links by trying alternative navigation paths (menu, search, direct URL).",
  "starting_page": "https://example.com",
  "llm_provider": "openai",
  "llm_model": "gpt-4o-mini",
  "abort_on_error": false,
  "steps": [
    {
      "type": "try",
      "name": "Navigate to Account Settings",
      "description": "Try multiple ways to reach account settings page (link might be broken/moved)",
      "strategies": [
        {
          "name": "Strategy 1: Direct link from homepage",
          "description": "Click the account settings link (might be removed in redesign)",
          "steps": [
            {
              "action": "click",
              "locator": {"strategy": "selector", "value": "a[href='/account/settings']"}
            },
            {
              "action": "wait",
              "duration": 2000
            }
          ],
          "verify": {
            "type": "url_contains",
            "pattern": "/account/settings"
          }
        },
        {
          "name": "Strategy 2: Through navigation menu",
          "description": "Navigate via dropdown menu (more stable path)",
          "steps": [
            {
              "action": "click",
              "description": "Open account menu",
              "locator": {"strategy": "selector", "value": "#account-menu-button"}
            },
            {
              "action": "wait",
              "duration": 500
            },
            {
              "action": "click",
              "description": "Click settings in dropdown",
              "locator": {"strategy": "text", "value": "Settings"}
            },
            {
              "action": "wait",
              "duration": 2000
            }
          ],
          "verify": {
            "type": "url_contains",
            "pattern": "/settings"
          }
        },
        {
          "name": "Strategy 3: Direct URL navigation",
          "description": "Navigate directly to URL (bypass UI completely)",
          "steps": [
            {
              "action": "navigate",
              "url": "https://example.com/account/settings"
            }
          ],
          "verify": {
            "type": "and",
            "conditions": [
              {
                "type": "url_contains",
                "pattern": "/settings"
              },
              {
                "type": "not",
                "condition": {
                  "type": "element_visible",
                  "selector": ".error-404",
                  "timeout": 3000
                }
              }
            ]
          }
        },
        {
          "name": "Strategy 4: Search for settings page",
          "description": "Use site search to find settings",
          "steps": [
            {
              "action": "click",
              "description": "Open search",
              "locator": {"strategy": "selector", "value": "#search-button"}
            },
            {
              "action": "fill",
              "locator": {"strategy": "selector", "value": "#search-input"},
              "value": "account settings"
            },
            {
              "action": "press",
              "keys": "Enter"
            },
            {
              "action": "wait",
              "duration": 2000
            },
            {
              "action": "click",
              "description": "Click first result",
              "locator": {"strategy": "selector", "value": ".search-result:first-child a"}
            }
          ],
          "verify": {
            "type": "url_contains",
            "pattern": "/settings"
          }
        },
        {
          "name": "Strategy 5: Vision LLM navigation",
          "description": "Let AI figure out how to navigate",
          "escalate": {
            "type": "vision_llm",
            "prompt": "Navigate to the account settings page. The usual link might be broken or moved. Look for alternative ways like menus, buttons, or search.",
            "timeout": 45000,
            "max_actions": 10
          }
        }
      ],
      "on_all_strategies_failed": {
        "type": "sequence",
        "steps": [
          {
            "action": "screenshot",
            "description": "Capture current page state"
          },
          {
            "action": "extract",
            "description": "Extract available navigation options",
            "prompt": "List all navigation links and menu options visible on this page"
          }
        ],
        "then": {
          "action": "error",
          "message": "Could not navigate to account settings after trying 5 different strategies"
        }
      }
    },
    {
      "type": "if",
      "name": "Verify on settings page",
      "condition": {
        "type": "element_visible",
        "selector": "h1:has-text('Settings'), h1:has-text('Account Settings')",
        "timeout": 5000
      },
      "then": {
        "action": "extract",
        "description": "Extract available settings",
        "prompt": "Extract all available settings categories and options"
      },
      "else": {
        "action": "screenshot",
        "description": "Unexpected page - capture for debugging"
      }
    }
  ]
}
