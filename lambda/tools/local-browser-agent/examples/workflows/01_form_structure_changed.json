{
  "name": "Form with Changed Structure - Adaptive Field Location",
  "description": "Demonstrates handling forms where field IDs or structure changed. Tries multiple strategies to find and fill the email field.",
  "starting_page": "https://example.com/signup",
  "llm_provider": "openai",
  "llm_model": "gpt-4o-mini",
  "abort_on_error": false,
  "session": {
    "profile_name": "test-profile",
    "clone_for_parallel": false
  },
  "steps": [
    {
      "type": "try",
      "name": "Fill Email Field",
      "description": "Try multiple ways to locate and fill the email field (IDs change frequently)",
      "strategies": [
        {
          "name": "Strategy 1: Use new ID",
          "description": "Try the new email field ID (after redesign)",
          "steps": [
            {
              "action": "fill",
              "locator": {"strategy": "selector", "value": "#email-input-v2"},
              "value": "user@example.com"
            }
          ],
          "verify": {
            "type": "element_exists",
            "selector": "#email-input-v2[value='user@example.com']",
            "timeout": 2000
          }
        },
        {
          "name": "Strategy 2: Use old ID",
          "description": "Fallback to old email field ID (before redesign)",
          "steps": [
            {
              "action": "fill",
              "locator": {"strategy": "selector", "value": "#email"},
              "value": "user@example.com"
            }
          ],
          "verify": {
            "type": "element_exists",
            "selector": "#email[value='user@example.com']",
            "timeout": 2000
          }
        },
        {
          "name": "Strategy 3: Use name attribute",
          "description": "Find by name attribute (more stable)",
          "steps": [
            {
              "action": "fill",
              "locator": {"strategy": "selector", "value": "input[name='email']"},
              "value": "user@example.com"
            }
          ],
          "verify": {
            "type": "element_exists",
            "selector": "input[name='email'][value='user@example.com']",
            "timeout": 2000
          }
        },
        {
          "name": "Strategy 4: Use placeholder text",
          "description": "Find by placeholder text (fallback)",
          "steps": [
            {
              "action": "fill",
              "locator": {"strategy": "selector", "value": "input[placeholder*='email' i]"},
              "value": "user@example.com"
            }
          ],
          "verify": {
            "type": "element_exists",
            "selector": "input[placeholder*='email' i][value='user@example.com']",
            "timeout": 2000
          }
        },
        {
          "name": "Strategy 5: Vision LLM",
          "description": "Use vision AI to locate the email field",
          "escalate": {
            "type": "vision_llm",
            "prompt": "Find the email input field on this signup form and enter 'user@example.com'. The field might have changed structure or ID.",
            "timeout": 30000,
            "max_actions": 5
          }
        }
      ],
      "on_all_strategies_failed": {
        "action": "screenshot",
        "description": "Take screenshot for debugging",
        "then": {
          "action": "error",
          "message": "Could not locate email field after trying 5 strategies"
        }
      }
    },
    {
      "action": "click",
      "description": "Submit the form",
      "locator": {"strategy": "role", "value": "button[name='Submit']"}
    },
    {
      "type": "if",
      "name": "Check Success",
      "description": "Verify form submission succeeded",
      "condition": {
        "type": "or",
        "conditions": [
          {
            "type": "url_contains",
            "pattern": "/success"
          },
          {
            "type": "element_visible",
            "selector": ".success-message",
            "timeout": 5000
          }
        ]
      },
      "then": {
        "action": "screenshot",
        "description": "Capture success state"
      },
      "else": {
        "action": "screenshot",
        "description": "Capture failure state for debugging"
      }
    }
  ]
}
