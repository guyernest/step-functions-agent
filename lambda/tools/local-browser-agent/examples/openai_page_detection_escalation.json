{
  "name": "Page State Detection with Escalation",
  "description": "Demonstrates using escalation to detect what page we're on",
  "llm_provider": "openai",
  "llm_model": "gpt-4o-mini",
  "starting_page": "https://www.example.com",
  "abort_on_error": false,
  "steps": [
    {
      "action": "wait",
      "description": "Wait for page to load",
      "duration": 2000
    },
    {
      "action": "execute_js",
      "description": "Get page title using DOM (fastest method)",
      "script": "return { title: document.title, url: window.location.href };"
    },
    {
      "action": "screenshot",
      "description": "Take screenshot for vision analysis if needed",
      "save_to": "page_state.png"
    },
    {
      "action": "extract",
      "description": "Extract page information using vision",
      "method": "vision",
      "prompt": "Analyze this page and tell me: 1) What type of page is this (homepage, login, search results, error page, etc.)? 2) What is the main heading or title? 3) What key actions are available?",
      "schema": {
        "type": "object",
        "properties": {
          "page_type": {
            "type": "string",
            "description": "Type of page (homepage, login, search, etc.)"
          },
          "main_heading": {
            "type": "string",
            "description": "The main visible heading or title"
          },
          "available_actions": {
            "type": "array",
            "items": {"type": "string"},
            "description": "List of main interactive elements or links"
          },
          "confidence": {
            "type": "number",
            "description": "Confidence in the analysis (0.0-1.0)"
          }
        },
        "required": ["page_type", "main_heading", "available_actions", "confidence"]
      }
    }
  ]
}
